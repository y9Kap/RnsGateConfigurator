# Changelog

Формат основан на «Keep a Changelog» и придерживается Semantic Versioning.

## [1.0.15] - 2025-11-21
### Removed
- Удалены неиспользуемые npm-скрипты: `copy:server` и `build:all`.
### Changed
- README обновлён: убраны упоминания удалённых скриптов; уточнён раздел о релизах (триггер по тегам `v*`).
- Подготовка к проверке GitHub Actions: выпуск новой версии и тега.

## [1.0.1] - 2025-11-19
### Fixed
- Устранено «дёрганье» кнопки «Заполнить актуальные данные» при нажатии: закреплена минимальная ширина/высота кнопок действий, добавлены стили для предотвращения переноса текста; индикатор сети уже имеет фиксированный размер и не влияет на лэйаут.

## [1.0.2] - 2025-11-19
### Fixed
- Дополнительно исключены остаточные скачки ширины/высоты у кнопки «Заполнить актуальные данные» при переходе в disabled: на время запроса жёстко фиксируем текущие width/height в пикселях и снимаем фиксацию после завершения. Это устраняет субпиксельные расхождения рендеринга шрифтов/бордеров между состояниями.
### Removed
- Секция LoraSPI больше не поддерживается: удалён неиспользуемый код (тип LoraSPIInfo, парсинг/нормализация ключей, очистка полей) в src/index.ts.

## [1.0.3] - 2025-11-19
### Fixed
- Приведены к единому виду шрифты и их размеры в секции RNSD:
  - Заголовки секций в RNSD заменены с h2.form-title на div.form-title (как в других разделах).
  - В стилях зафиксирован размер и межстрочье .form-title, чтобы тип тега не влиял на отображение.
  - Блоки кода (.code) используются одинаково во всех секциях, включая RNSD/SPI.

## [1.0.4] - 2025-11-19
### Changed
- Секция SPI: добавлена визуальная «лесенка» для различения заголовка, главы «GPIO» и подглав (IRQ/Busy/NRST/TX EN/RX EN). Вёрстка сгруппирована на уровни, добавлены стили .ladder и .form-subtitle. Идентификаторы полей не менялись.

## [1.0.5] - 2025-11-19
### Changed
- Секция SPI → GPIO: по запросу упростил вёрстку — теперь GPIO оформлен аналогично полю «SPI устройство»: слева подписи «IRQ», «Busy», «NRST», «TX EN», «RX EN» (центрированы), справа — поля Chip/Pin. Убрана «лесенка».
- Стили: добавлены .center-label (центровка левой подписи) и .pair-grid для компактного размещения полей Chip/Pin; адаптив на мобильных (стекование).

## [1.0.6] - 2025-11-19
### Changed
- SPI → GPIO: уточнена разметка по вашему ТЗ — теперь после подзаголовка «GPIO» идут отдельные строки:
  - строка с центровкой «IRQ», затем отдельной строкой поля Chip и Pin;
  - далее «Busy» по центру, ниже Chip/Pin; затем «NRST», ниже Chip/Pin; «TX EN», ниже Chip/Pin; «RX EN», ниже Chip/Pin.
  Такой порядок визуально совпадает со стилем строки «SPI устройство», но с промежуточными центрированными подзаголовками.
- Стили: добавлены .subtitle-center (центровка строки-подзаголовка) и .pair-inline (в одну строку Chip/Pin: label+input, label+input; с адаптивным стекованием на мобильных).

## [1.0.7] - 2025-11-19
### Changed
- GPIO приведён к полностью идентичному виду со строкой «SPI устройство»: после каждого центрированного заголовка (IRQ/Busy/NRST/TX EN/RX EN) поля Chip и Pin теперь идут ДРУГ ЗА ДРУГОМ отдельными строками гриды, а не рядом в одной строке.
- Идентификаторы полей не менялись; логика чтения/валидации/сохранения осталась прежней.
- Стили не требуют изменений; сохранены ранее добавленные классы для обратной совместимости.

## [1.0.8] - 2025-11-19
### Changed
- Визуально уравнял «GPIO» и «SPI устройство»: заголовок «GPIO» теперь сделан через label внутри гриды, а не .form-subtitle, поэтому он выглядит так же, как «SPI устройство» (без лишней жирности/тёмности).
- Добавлены небольшие отступы слева у полей «SPI устройство», а также у всех полей «Chip» и «Pin» для IRQ/Busy/NRST/TX EN/RX EN (.indent-left).
- Для «SPI устройство» также добавлён отступ слева.
### Removed
- Кнопка «Сохранить» из секции SPI удалена: сохранение будет общим для RNSD и SPI. Удалена разметка кнопки и локальная логика обработчика/подсказок.

## [1.0.9] - 2025-11-19
### Changed
- Добавлен дополнительный вертикальный отступ после строки «SPI устройство», чтобы визуально отделить её от блока GPIO (.after-spi-gap на label и input).
- Лейблы полей «Chip» и «Pin» выровнены по правому краю и слегка придвинуты к своим input полям с помощью нового класса .label-right (text-align: right; padding-right: 6px;).
### Added
- Новые CSS-утилиты: .label-right и .after-spi-gap в styles.css.

## [1.0.10] - 2025-11-19
### Changed
- Секция SPI → GPIO переведена в табличный вид по вашему ТЗ: столбцы «Chip» и «Pin», а строками идут «IRQ», «Busy», «NRST», «TX EN», «RX EN».
- Обновлена разметка в src/index.ts и добавлены стили .gpio-table, .gpio-header, .gpio-row-title для табличного отображения; адаптив на мобильных (стекование в один столбец).

## [1.0.11] - 2025-11-19
### Changed
- GPIO: названия строк «IRQ», «Busy», «NRST», «TX EN», «RX EN» сделаны обычным начертанием (не жирные) и слегка уменьшены по размеру (класс .gpio-row-title).

## [1.0.12] - 2025-11-21
### Changed
- LoraSPI: для полей Pin (IRQ/Busy/NRST/TX EN/RX EN) добавлены явные плейсхолдеры «номер или имя» в таблице настроек интерфейсов. Это облегчает ввод как числовых, так и именованных линий.

## [1.0.13] - 2025-11-21
### Changed
- Кнопка «Сохранить» во всех формах (WiFi, Ethernet, FreeDV и Interfaces) активируется только при наличии изменений относительно последнего сохранения.
  - При первом открытии раздела кнопка выключена и разблокируется после первого изменения пользователя.
  - После успешного сохранения базовая точка сравнения обновляется, и кнопка снова блокируется, пока не будут внесены новые изменения.

## [1.0.0] - 2025-11-18
### Added
- Начальная версия конфигуратора «RNS Gate — Configurator» (TypeScript + esbuild, без фреймворков).
- Разделы интерфейса: RNSD, FreeDV (отображение сырых данных), WiFi и Ethernet (специализированные формы).
- Форма WiFi:
  - Режимы: client/AP.
  - Получение текущей конфигурации через GET /wifi/info.
  - Переключение DHCP/Static, поля IP/Mask/Gateway/DNS1/DNS2.
  - Сохранение через POST /wifi/apply (application/x-www-form-urlencoded).
  - Подсказки/автозаполнение и локальный профиль (localStorage: profile_wifi).
- Форма Ethernet:
  - Получение конфигурации через GET /ethernet/info.
  - Переключение DHCP/Static, поля IP/Mask/Gateway/DNS1/DNS2.
  - Сохранение через POST /ethernet/apply (application/x-www-form-urlencoded).
  - Подсказки/автозаполнение и локальный профиль (localStorage: profile_ethernet).
- Статус-бар сети с индикацией: online, offline, busy, error.
  - Искусственная задержка смены цветов индикатора для мягких переходов.
  - Центрированное сообщение о состоянии/ошибках в верхней панели.
- Оффлайн-режим: корректная работа UI при открытии file:// и/или отсутствии сети (navigator.onLine = false).
  - В оффлайне специализированные формы рендерятся с дефолтами, запросы к CGI не выполняются.
- API-клиент (src/api.ts):
  - Базовый путь /cgi-bin (переопределяемый через window.CGI_BASE или window.__CGI_BASE__).
  - GET/POST с таймаутом, разбором ошибок и поддержкой JSON или текстовых ответов.
- Сборка через esbuild: bundle, minify, sourcemap → dist/bundle.js.
- Скрипты npm:
  - build — сборка.
  - copy:static — копирование index.html и styles.css в dist.
  - copy:server — копирование dist в локальный серверный проект (путь можно менять под окружение).
  - build:all — последовательный запуск сборки и копирования.
- Базовые стили интерфейса (styles.css): сайдбар, контент, формы, переключатели, статус-индикатор, код-блоки.

[1.0.0]: https://example.com/rns-gate-configurator/releases/1.0.0
[1.0.1]: https://example.com/rns-gate-configurator/releases/1.0.1
[1.0.2]: https://example.com/rns-gate-configurator/releases/1.0.2
